<h1>CSV-Einladung</h1>

<form method="post" action="csvinvite" enctype="multipart/form-data">


CSV-Datei ausw&auml;hlen: <input type="file" name="datei" required> <br><br>

<!--  Session-Variable für Kurs wird in kursviewAction() gesetzt -->
<input type="hidden" value="<?php echo $_SESSION['kurs_id']; ?>" name='kurs_id'>

<!-- wird übergeben, um der csvinviteAction() mitzuteilen, dass von dieser Seite aus zugegriffen wird -->
<input type="hidden" value="csvinvite" name='site'>

<input type="submit" value="Datei jetzt hochladen!">



</form>

<br><br>

<?php 

if($meldung=="datentyp") {
	echo "<b>Es sind nur CSV-Dateien erlaubt!</b>";
}

if($meldung=="dateigroesse") {
	echo "<b>Dateigr&ouml;sse von 2 MB darf nicht &uuml;berschritten werden!</b>";
}

if($meldung=="erfolgreich") {
	echo "<h3><font color = 'green'>Upload der Datei war erfolgreich!</font></h3><br>";
	
		
	}
	
if(!empty($fehler)) {
	echo "<b><font color = 'red'>Es wurde keine Einladung an folgende E-Mail-Adressen versendet, da bereits eine Einladung zum angegebenen Kurs existiert: </font></b><br><br>";
		
	
?>
<table>
<tr><th width="300"><b>Email</b></th></tr>
<?php 

	foreach($fehler as $f) {
		?>
		
		<tr><td><?php echo $f[0];?></td></tr>
		
	<?php }?>
	</table>		
<?php 	
}
?>
<br><br>


<?php 
if(!empty($falsetype)){
	echo "<b><font color = 'red'>Datensatz in CSV-Datei fehlerhaft! Es wurde keine E-Mail f&uuml;r folgende Werte generiert:</font></b><br><br>";
	
	?>
	<table>
	<tr><th width="300"><b>Datensatz</b></th></tr>
	<?php 
	
	foreach($falsetype as $ft) {
		$num=count($ft);
		?>
			
			<tr><td><?php for($i=0;$i<$num;$i++){
								echo $ft[$i]." ";}?></td></tr>
			
		
		</table>		
	<?php 	
}}
	?>
	<br><br>









<form method="post" action="kursview">
<input type="submit" value="zur&uuml;ck zur Kurs&uuml;bersicht">
<input type="hidden" value="<?php echo $_SESSION['kurs_id']; ?>" name='kurs_id'>

</form>

