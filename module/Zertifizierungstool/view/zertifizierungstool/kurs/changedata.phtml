<h1>Kursangaben &auml;ndern</h1>

<?php 
    
use Zertifizierungstool\Model\Kurs;
use Zertifizierungstool\Model\User;

//Nur eingeloggte Benutzer hab auf diese Seite Zugriff
if (User::currentUser()->istZertifizierer() || User::currentUser()->istAdmin()) {
    //mach nix
} else {
    header("Location: /user/home");
    exit();
}

if (isset($status)) {
	echo $status;
}
if($status == "Erfolgreich geändert.") {
	header("refresh:2; url = /kurs/showkurse");	
}

else {
	unset($status);
?>
	
    <h5> Passen Sie die Kursdaten entsprechend an.</h5>

    <form accept-charset="utf-8" method="post" action="changedata">
    <div class="form-group">
        <label for="kursname"> Kursname </label>
        <input name="kursname" type="text" class="form-control" value='<?=$kurs->getKurs_name()?>' required>
    </div>
    <div class="form-group">
        <label for="kursstart"> Kursstart </label>
        <input name="kursstart" type="date" class="form-control" value='<?=$kurs->getKurs_start()?>' required>
    </div>
    <div class="form-group">
        <label for="kursende"> Kursende </label>
        <input name="kursende" type="date" class="form-control" value='<?=$kurs->getKurs_ende()?>' required>
    </div>
    <div class="form-group">
        <label for="sichtbarkeit"> Sichtbarkeit </label>
        <select name="sichtbarkeit" class="form-control">
			<?php
                        if($kurs->getSichtbarkeit() == 1){ ?>
                            <option value = 1 selected>&ouml;ffentlich</option>
                            <option value= 0 >privat</option>
                        <?php } else { ?>
                            <option value= 0 selected>privat</option>
                            <option value = 1 > &ouml;ffentlich </option>
                        <?php } ?>
        </select>
    </div>
    <div class="form-group">
        <label for="kursleiter"> Kursleiter </label>
        <select name="kursleiter" class="form-control">
            <option selected value='<?=$kurs->getBenutzername()?>'><?=$kurs->getBenutzername()?></option>
        		 <?php 
                         foreach($result as $r) {
        		 	if($r->getBenutzername() == $kurs->getBenutzername()) continue;
        		 ?>
        		 	<option value='<?php echo $r->getBenutzername(); ?>'><?php echo $r->getBenutzername(); ?></option>  		 
        		 	
        		 <?php }  
        		 ?>
        </select>
    </div>
    <div class="form-group">
        <label for="beschreibung"> Beschreibung </label>
        <textarea style="resize:vertical" name="beschreibung" class="form-control" value='<?=$kurs->getBeschreibung()?>' required></textarea>
    </div>  
  <?php 
    if($archiv == "gesetzt") { ?>
        <input type="hidden" name="kurs_id" readonly="readonly" value="<?=$kurs->getKurs_id()?>">
        <input type = "submit" name="übernehmen" value="Kursdaten kopieren"> 
    <?php } else { ?>
        <input type="hidden" name="kurs_id" readonly="readonly" value="<?=$kurs->getKurs_id()?>">
        <input type = "submit" name="speichern" value="Kursdaten ändern!">
    <?php } ?>
        
</form>
    
<?php
}
?>

<a href="<?= $this->url('pruefung', ['action' => 'overview', 'id' => $kurs->getKurs_id()])?>"><button type="button">Zu den Pr&uuml;fungen</button></a>